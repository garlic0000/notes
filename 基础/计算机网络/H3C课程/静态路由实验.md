## 静态路由实验

### 实验拓扑

![20210113-18](/home/garlic/Desktop/笔记/图片/20210113-18.PNG)

### 实验需求

1. 按照图示配置 IP 地址
2. 按照如下路径规划配置静态路由，实现连接 PC 的业务网段互通
   1. `192.168.1.0/24` 网段到达 `192.168.2.0/24` 网段经过 R1，R2，R3
   2. `192.168.2.0/24` 网段到达 `192.168.1.0/24` 网段经过 R3，R4，R1
   3. `192.168.1.0/24` 网段到达 `192.168.3.0/24` 网段经过 R1，R4，R5
   4. `192.168.2.0/24` 网段到达 `192.168.3.0/24` 网段经过 R3，R4，R5
   5. `192.168.3.0/24` 网段到达 `192.168.1.0/24` 网段和 `192.168.2.0/24` 网段的路由来回一致
   6. R5 上不允许出现到达其他业务网段的明细路由
   7. 所有经过 R4 和 R5 的流量通过等价路由实现负载分担

------

### 实验解法

1. **配置 IP 地址**

   ![20210113-19](/home/garlic/Desktop/笔记/图片/20210113-19.PNG)

   ![20210113-20](/home/garlic/Desktop/笔记/图片/20210113-20.PNG)

   ![20210113-21](/home/garlic/Desktop/笔记/图片/20210113-21.PNG)

   ![20210113-22](/home/garlic/Desktop/笔记/图片/20210113-22.PNG)

   ![20210113-23](/home/garlic/Desktop/笔记/图片/20210113-23.PNG)

   ![20210113-24](/home/garlic/Desktop/笔记/图片/20210113-24.PNG)

   ![20210113-25](/home/garlic/Desktop/笔记/图片/20210113-25.PNG)

   ![20210113-26](/home/garlic/Desktop/笔记/图片/20210113-26.PNG)

2. **按照需求配置静态路由，实现连接 PC 的业务网段互通**

   　　*分析：配置静态路由时，首先要明确一点，是要求全网互通，还是只要求业务网段互通。如果是只要求业务网段互通的话，就只需要配置到达业务网段的静态路由，并不需要配置到达途径的互联网段的静态路由
   　　根据这个思路，就可以得知，只需要按照规划的路径，使沿途每台路由器上具有到达目的业务网段的路由就可以了
   　　另外，对于某些路由器，某些业务网段是其直连网段，路由器会自动产生相应的直连路由，并不需要再额外配置静态路由*
   　　
   *步骤 1：配置 `192.168.1.0/24` 网段到 `192.168.2.0` 网段的静态路由*

   　　*分析：目的网段是 `192.168.2.0/24` 网段，需要经过 R1，R2，R3，在 R1 上需要配置静态路由，下一跳指向 R2 ，R2 上也需要配置静态路由，下一跳指向 R3，R3 上会自动产生到达 `192.168.2.0/24` 网段的直连路由，不需要额外配置*

   ![20210113-27](/home/garlic/Desktop/笔记/图片/20210113-27.PNG)

   ![20210113-28](/home/garlic/Desktop/笔记/图片/20210113-28.PNG)

   *步骤 2：配置 `192.168.2.0/24` 网段到 `192.168.1.0` 网段的静态路由*

   　　*分析：目的网段是 `192.168.1.0/24` 网段，需要经过 R3，R4，R1，在 R3 上需要配置静态路由，下一跳指向 R4 ，R4 上也需要配置静态路由，下一跳指向 R1，R1 上会自动产生到达 `192.168.1.0/24` 网段的直连路由，不需要额外配置*

   ![20210113-29](/home/garlic/Desktop/笔记/图片/20210113-29.PNG)

   ![20210113-30](/home/garlic/Desktop/笔记/图片/20210113-30.PNG)

   *步骤 3：配置 `192.168.1.0/24` 网段到 `192.168.3.0` 网段的静态路由*

   　　*分析：目的网段是 `192.168.3.0/24` 网段，需要经过 R1，R4，R5，在 R1 上需要配置静态路由，下一跳指向 R4 ，R4 上也需要配置静态路由，下一跳指向 R5，且 R4 到 R5 之间要求有等价路由，R5 上会自动产生到达 `192.168.3.0/24` 网段的直连路由，不需要额外配置*

   ![20210113-31](/home/garlic/Desktop/笔记/图片/20210113-31.PNG)

   ![20210113-32](/home/garlic/Desktop/笔记/图片/20210113-32.PNG)

   *步骤 4：配置 `192.168.2.0/24` 网段到 `192.168.3.0` 网段的静态路由*

   　　*分析：目的网段是 `192.168.3.0/24` 网段，需要经过 R3，R4，R5，在 R3 上需要配置静态路由，下一跳指向 R4 ，R4 在上一步已经配置过了，无需再次配置，R5 上会自动产生到达 `192.168.3.0/24` 网段的直连路由，不需要额外配置*

   ![20210113-33](/home/garlic/Desktop/笔记/图片/20210113-33.PNG)

   *步骤 5：配置 `192.168.3.0/24` 网段到 `192.168.1.0` 网段的静态路由*

   　　*分析：目的网段是 `192.168.1.0/24` 网段，要求来回路径一致，就是要经过 R5，R4，R1，在 R5 上需要配置静态路由，下一跳指向 R4 ，但又不允许出现明细路由，那么只能通过默认路由来实现，而且 R5 到 R4 上需求有等价路由，R4 在步骤 2 已经配置过了到达 `192.168.1.0/24` 网段的路由，不需要再次配置，R1 上会自动产生到达 `192.168.1.0/24` 网段的直连路由，也不需要额外配置*

   ![20210113-34](/home/garlic/Desktop/笔记/图片/20210113-34.PNG)

   *步骤 6：配置 `192.168.3.0/24` 网段到 `192.168.2.0` 网段的静态路由*

   　　*分析：目的网段是 `192.168.2.0/24` 网段，要求来回路径一致，就是要经过 R5，R4，R3，R5 在上一步已经配置过了默认路由，不需要再次配置，R4 需要配置静态路由，下一跳指向 R3，R3 上会自动产生到达 `192.168.3.0/24` 网段的直连路由，也不需要额外配置*

   ![20210113-35](/home/garlic/Desktop/笔记/图片/20210113-35.PNG)